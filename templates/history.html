<!-- 히스토리 페이지 -->

{% extends 'base.html' %}

{% block title %}FocusMate - 히스토리{% endblock %}

{% block content %}
<div class="container">
    <div class="section-header">
        <h2>학습 히스토리</h2>
        <p>감정 상태 기록과 학습 활동을 확인하세요.</p>
        <div class="action-buttons">
            <button id="export-data" class="btn secondary">데이터 내보내기</button>
            <select id="filter-period" class="period-filter">
                <option value="all">전체 기간</option>
                <option value="today">오늘</option>
                <option value="week" selected>이번 주</option>
                <option value="month">이번 달</option>
            </select>
        </div>
    </div>
    
    <div class="history-content">
        <div class="history-sidebar">
            <h3>감정 통계</h3>
            <div class="emotion-stats">
                <div class="stats-chart">
                    <canvas id="emotion-chart"></canvas>
                </div>
                <div class="stats-summary">
                    <div class="stats-item">
                        <span class="stats-label">전체 세션:</span>
                        <span class="stats-value" id="total-sessions">0</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-label">최다 감정:</span>
                        <span class="stats-value" id="dominant-emotion">-</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-label">집중 시간:</span>
                        <span class="stats-value" id="focus-time">0분</span>
                    </div>
                </div>
            </div>
            
            <h3>필터</h3>
            <div class="filter-options">
                <div class="filter-group">
                    <label>감정 상태:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="emotion" value="focused" checked> 집중</label>
                        <label><input type="checkbox" name="emotion" value="interested" checked> 흥미</label>
                        <label><input type="checkbox" name="emotion" value="neutral" checked> 중립</label>
                        <label><input type="checkbox" name="emotion" value="anxious" checked> 불안</label>
                        <label><input type="checkbox" name="emotion" value="tired" checked> 피로</label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="history-main">
            <div class="history-timeline">
                <h3>감정 기록</h3>
                
                <div id="empty-history" class="empty-state" style="display:none;">
                    <p>아직 기록된 감정 데이터가 없습니다.</p>
                    <p>학습을 시작하고 감정 감지를 사용해보세요!</p>
                </div>
                
                <div id="history-items">
                    <!-- 히스토리 아이템들은 JavaScript로 동적으로 추가됩니다 -->
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/history.js') }}"></script>
{% endblock %}